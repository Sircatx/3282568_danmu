<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>æ€ªå°è‘µçš„å¼¹å¹•å½’æ¡£</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        :root { --main-pink: #ff69b4; --light-pink: #fff0f5; --border-pink: #ffe4ed; }
        body { font-family: -apple-system, sans-serif; background: #fdf2f5; margin: 0; padding: 20px; color: #444; }
        .container { max-width: 600px; margin: 0 auto; background: white; border-radius: 24px; padding: 30px; box-shadow: 0 10px 40px rgba(255,105,180,0.1); }
        h1 { text-align: center; color: var(--main-pink); font-size: 1.6rem; margin-bottom: 25px; display: flex; align-items: center; justify-content: center; gap: 10px; }
        h1::before, h1::after { content: 'ğŸŒ»'; }
        
        .section-title { font-size: 0.9rem; color: #999; margin: 20px 0 10px 10px; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(130px, 1fr)); gap: 15px; }
        
        .card { background: white; border: 2px solid var(--border-pink); border-radius: 16px; padding: 15px; text-align: center; cursor: pointer; transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); text-decoration: none; color: inherit; display: block; }
        .card:hover { border-color: var(--main-pink); background: var(--light-pink); transform: translateY(-5px); }
        .card .icon { font-size: 2rem; margin-bottom: 8px; display: block; }
        .card .name { font-weight: bold; font-size: 1rem; color: #333; }
        
        #preview-area { display: none; margin-top: 20px; animation: fadeIn 0.4s; }
        iframe { width: 100%; height: 500px; border: 2px solid var(--border-pink); border-radius: 16px; background: white; }
        .back-btn { background: var(--main-pink); color: white; border: none; padding: 10px 20px; border-radius: 50px; cursor: pointer; margin-bottom: 15px; font-weight: bold; box-shadow: 0 4px 10px rgba(255,105,180,0.3); }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .loading { text-align: center; color: var(--main-pink); padding: 50px; font-weight: bold; }
    </style>
</head>
<body>
    <div class="container">
        <h1>æ€ªå°è‘µçš„å¼¹å¹•å½’æ¡£</h1>
        
        <div id="main-view">
            <div class="section-title">ğŸ“… æœˆåº¦å½’æ¡£ç›®å½•</div>
            <div class="grid" id="folder-grid">
                <div class="loading">æ­£åœ¨åŠ è½½è®°å¿†...</div>
            </div>
        </div>

        <div id="preview-area">
            <button class="back-btn" onclick="closePreview()">â¬… è¿”å›ç›®å½•</button>
            <iframe id="file-frame"></iframe>
        </div>
    </div>

    <script>
        const repo = "Sircatx/3282568_danmu";
        
        async function loadFolders() {
            const grid = document.getElementById('folder-grid');
            try {
                // è™½ç„¶ API æ…¢ï¼Œä½†æˆ‘ä»¬åªåœ¨é¦–é¡µç”¨å®ƒæŠ“ä¸€æ¬¡æ–‡ä»¶å¤¹åå­—
                const res = await fetch(`https://api.github.com/repos/${repo}/contents/`);
                const data = await res.json();
                
                let html = '';
                data.forEach(item => {
                    // åªå±•ç¤ºåƒ 2026-02 è¿™ç§å¹´æœˆæ ¼å¼çš„æ–‡ä»¶å¤¹
                    if (item.type === 'dir' && /^\d{4}-\d{2}$/.test(item.name)) {
                        html += `
                            <div class="card" onclick="openFolder('${item.name}')">
                                <span class="icon">ğŸ“‚</span>
                                <span class="name">${item.name}</span>
                            </div>
                        `;
                    }
                });
                grid.innerHTML = html || '<div class="loading">æš‚æ— å½’æ¡£æ–‡ä»¶å¤¹</div>';
            } catch (e) {
                // å¦‚æœ API æŒ‚äº†ï¼Œæˆ‘ä»¬æ‰‹åŠ¨ä¿åº•æ˜¾ç¤ºå½“å‰æœˆä»½
                const now = new Date();
                const current = `${now.getFullYear()}-${String(now.getMonth()+1).padStart(2,'0')}`;
                grid.innerHTML = `
                    <div class="card" onclick="openFolder('${current}')">
                        <span class="icon">ğŸ“‚</span>
                        <span class="name">${current}</span>
                    </div>
                `;
            }
        }

        function openFolder(folderName) {
            document.getElementById('main-view').style.display = 'none';
            const preview = document.getElementById('preview-area');
            const frame = document.getElementById('file-frame');
            
            // ä½¿ç”¨åŠ é€Ÿé“¾æ¥åŠ è½½
            frame.src = `https://fastly.jsdelivr.net/gh/${repo}@main/${folderName}/`;
            preview.style.display = 'block';
        }

        function closePreview() {
            document.getElementById('preview-area').style.display = 'none';
            document.getElementById('main-view').style.display = 'block';
        }

        loadFolders();
    </script>
</body>
</html>
