<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>æ°¸å¥çš„å¼¹å¹•å½’æ¡£</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body { font-family: -apple-system, sans-serif; padding: 20px; background: #f0f2f5; max-width: 600px; margin: 0 auto; }
        .card { background: white; border-radius: 12px; padding: 15px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); margin-bottom: 15px; }
        h1 { font-size: 1.2rem; color: #1a1a1a; margin-top: 0; }
        .item { display: flex; align-items: center; padding: 12px; border-bottom: 1px solid #eee; cursor: pointer; text-decoration: none; color: #333; }
        .item:last-child { border-bottom: none; }
        .item:hover { background: #f8f9fa; }
        .icon { margin-right: 10px; font-size: 1.2rem; }
        .back-btn { display: inline-block; margin-bottom: 10px; color: #0070f3; cursor: pointer; font-weight: bold; }
        .loading { text-align: center; color: #666; padding: 20px; }
    </style>
</head>
<body>
    <div id="app">
        <h1>ğŸ“‚ å¼¹å¹•å½’æ¡£æŸ¥çœ‹</h1>
        <div id="nav-area"></div>
        <div class="card" id="list">
            <div class="loading">æ­£åœ¨åŠ è½½æ•°æ®...</div>
        </div>
    </div>

    <script>
        const repo = "Sircatx/3282568_danmu";
        const listDiv = document.getElementById('list');
        const navArea = document.getElementById('nav-area');

        // è·å–ç›®å½•å†…å®¹çš„å‡½æ•°
        async function fetchContent(path = "") {
            listDiv.innerHTML = '<div class="loading">è¯»å–ä¸­...</div>';
            try {
                const res = await fetch(`https://api.github.com/repos/${repo}/contents/${path}`);
                const data = await res.json();
                
                // æ›´æ–°è¿”å›æŒ‰é’®
                navArea.innerHTML = path ? `<div class="back-btn" onclick="fetchContent('')">â¬… è¿”å›ä¸»ç›®å½•</div>` : '';
                
                let html = '';
                data.forEach(file => {
                    if (file.name === 'index.html' || file.name === 'vercel.json') return;
                    
                    if (file.type === 'dir') {
                        html += `<div class="item" onclick="fetchContent('${file.path}')"><span class="icon">ğŸ“</span>${file.name}</div>`;
                    } else {
                        // ä½¿ç”¨ jsdelivr åŠ é€ŸæŸ¥çœ‹æ–‡ä»¶å†…å®¹
                        const viewUrl = `https://jsd.cdn.zzko.cn/gh/${repo}@main/${file.path}`;
                        html += `<a class="item" href="${viewUrl}" target="_blank"><span class="icon">ğŸ“„</span>${file.name}</a>`;
                    }
                });
                listDiv.innerHTML = html || '<div class="loading">è¯¥ç›®å½•ä¸‹æ²¡æœ‰æ–‡ä»¶</div>';
            } catch (e) {
                listDiv.innerHTML = '<div class="loading">åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–ç¨åå†è¯•</div>';
            }
        }

        // åˆå§‹åŠ è½½æ ¹ç›®å½•
        fetchContent("");
    </script>
</body>
</html>
