<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>å¼¹å¹•å½’æ¡£æ™ºèƒ½æŸ¥çœ‹å™¨</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body { font-family: sans-serif; padding: 20px; line-height: 1.6; background: #f4f4f9; max-width: 800px; margin: 0 auto; }
        h1 { color: #333; border-bottom: 2px solid #0070f3; padding-bottom: 10px; }
        .file-list { background: white; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); padding: 20px; list-style: none; }
        li { padding: 8px 0; border-bottom: 1px solid #eee; }
        li:last-child { border-bottom: none; }
        a { color: #0070f3; text-decoration: none; font-weight: bold; display: block; }
        a:hover { background: #f0f7ff; }
        .back-btn { margin-bottom: 15px; display: inline-block; color: #666; }
    </style>
</head>
<body>
    <div id="nav"></div>
    <h1 id="title">ğŸ“‚ å¼¹å¹•å½’æ¡£ä»“åº“</h1>
    <ul class="file-list" id="content">åŠ è½½ä¸­...</ul>

    <script>
        const repo = "Sircatx/3282568_danmu";
        // è‡ªåŠ¨è¯†åˆ«å½“å‰æ˜¯åœ¨å“ªä¸ªæ–‡ä»¶å¤¹
        const path = window.location.pathname.replace(/^\/|\/$/g, '');
        
        async function loadFiles() {
            const contentDiv = document.getElementById('content');
            const title = document.getElementById('title');
            const nav = document.getElementById('nav');
            
            if (path) {
                nav.innerHTML = '<a href="/" class="back-btn">â¬… è¿”å›æ ¹ç›®å½•</a>';
                title.innerText = `ğŸ“ å½“å‰æ–‡ä»¶å¤¹: ${path}`;
            }

            try {
                const response = await fetch(`https://api.github.com/repos/${repo}/contents/${path}`);
                const data = await response.json();
                
                let html = '';
                data.forEach(file => {
                    // å¦‚æœæ˜¯æ–‡ä»¶å¤¹ï¼Œç‚¹å‡»è¿›å…¥
                    if (file.type === 'dir') {
                        html += `<li>ğŸ“ <a href="/${file.name}/">${file.name}/</a></li>`;
                    } 
                    // å¦‚æœæ˜¯ txt æ–‡ä»¶ï¼Œç›´æ¥æ‰“å¼€åŸå§‹é“¾æ¥ï¼ˆç§’å¼€ï¼‰
                    else if (file.name.endsWith('.txt')) {
                        const rawUrl = `https://jsd.cdn.zzko.cn/gh/${repo}@main/${path}/${file.name}`;
                        html += `<li>ğŸ“„ <a href="${rawUrl}" target="_blank">${file.name} (ç‚¹æ­¤åŠ é€ŸæŸ¥çœ‹)</a></li>`;
                    }
                });
                contentDiv.innerHTML = html || '<li>è¿™é‡Œç©ºç©ºå¦‚ä¹Ÿ...</li>';
            } catch (e) {
                contentDiv.innerHTML = '<li>åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥ä»“åº“æƒé™æˆ–åˆ·æ–°é‡è¯•ã€‚</li>';
            }
        }
        loadFiles();
    </script>
</body>
</html>
